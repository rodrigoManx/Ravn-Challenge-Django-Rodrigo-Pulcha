(this["webpackJsonpravn-challenge-v2-rodrigo-pulcha"]=this["webpackJsonpravn-challenge-v2-rodrigo-pulcha"]||[]).push([[0],{76:function(e,t,n){},77:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(2),s=n.n(r),i=n(67),c=n.n(i),o=(n(76),n(77),n(16)),l=n(1),d=n(43),j=n(9),p=n(28),h=n(29),m=n(31),u=n(30),b=n(45),O=n.p+"static/media/ArrowRight.1b02fef7.svg",f=n.p+"static/media/ActivityIndicator.014e4797.svg";function v(e){var t=e.property,n=e.value;return Object(a.jsxs)(s.a.Fragment,{children:[Object(a.jsxs)("div",{className:"cell data-cell",children:[Object(a.jsx)("div",{style:{textAlign:"left",width:""!==n?"50%":"100%"},children:Object(a.jsx)("h2",{className:"low-emphasis",children:t})}),""!==n?Object(a.jsx)("div",{style:{textAlign:"right",width:"50%"},children:Object(a.jsx)("h2",{children:n})}):Object(a.jsx)("div",{})]}),Object(a.jsx)("hr",{})]})}function x(){return Object(a.jsxs)("div",{className:"cell loading-cell",children:[Object(a.jsx)("img",{className:"activity-indicator",src:f}),Object(a.jsx)("h2",{className:"low-emphasis",children:"Loading"})]})}function g(e){var t=e.text;return Object(a.jsx)("div",{className:"cell",children:Object(a.jsx)("h2",{className:"high-emphasis",children:t})})}function y(e){var t=e.data,n=e.object,r="/graphql-mode"+(n.pathKey&&t[n.pathKey]?n.path+t[n.pathKey]:t.path),i=n.description?n.description(t):t.description;return t.name&&r?Object(a.jsx)(d.b,{to:encodeURI(r),children:Object(a.jsxs)("div",{className:"cell item-cell",children:[Object(a.jsx)("div",{children:Object(a.jsxs)(s.a.Fragment,{children:[Object(a.jsx)("h2",{children:t.name}),Object(a.jsxs)("p",{className:"low-emphasis",children:[" ",i," "]})]})}),Object(a.jsx)("img",{className:"cell-arrow-right",src:O})]})}):Object(a.jsx)("div",{})}function N(e){var t=e.object,n=Object(r.useState)(1),s=Object(b.a)(n,2),i=s[0],c=s[1],l=Object(r.useState)(!1),d=Object(b.a)(l,2),j=d[0],p=d[1],h=Object(o.useQuery)(t.query),m=h.loading,u=h.error,O=h.data,f=h.fetchMore,v=Object(r.useState)(!1),N=Object(b.a)(v,2),C=N[0],w=N[1],S=Object(r.useRef)(null);Object(r.useEffect)((function(){if(!j){var e=new IntersectionObserver(k,{root:null,rootMargin:"0px",threshold:.2});S.current&&e.observe(S.current)}}));var k=function(e){e[0].isIntersecting&&(p(!0),c(i+1),window.setTimeout((function(){C||p(!1)}),500))};return Object(r.useEffect)((function(){O&&f({variables:{cursor:O[t.field].pageInfo.endCursor}}).then((function(e){O[t.field].pageInfo&&!O[t.field].pageInfo.hasNextPage&&w(!0)}))}),[i]),m?Object(a.jsx)(x,{}):u?Object(a.jsx)(g,{text:"Failed to Load Data"}):Object(a.jsxs)("div",{children:[O[t.field].edges.map((function(e,n){var r=e.node;return Object(a.jsx)(y,{data:r,object:t},n)})),C?Object(a.jsx)("div",{className:"loading",ref:S}):Object(a.jsx)("div",{className:"loading",ref:S,children:Object(a.jsx)(x,{})})]})}var C=n.p+"static/media/BackArrow.9f2db49f.svg";function w(e){var t=e.title,n=e.canBack;return Object(a.jsxs)("div",{className:"header",children:[n?Object(a.jsx)("img",{className:"back-arrow",src:C,onClick:function(){window.history.back()}}):Object(a.jsx)("div",{}),Object(a.jsx)("h2",{children:t})]})}var S=n(36);function k(){var e=Object(S.a)(["\n  query Starship($id: ID!){\n    starship(id: $id){\n      name\n      model\n      costInCredits\n      length\n      crew\n      cargoCapacity\n      films {\n        edges {\n          node {\n            title\n          }\n        }\n      }\n      pilots {\n        edges {\n          node {\n            name\n          }\n        }\n      }\n    } \n  }\n"]);return k=function(){return e},e}function I(){var e=Object(S.a)(["\n  query Person($id: ID!){\n    person(id: $id){\n      name\n      gender\n      hairColor\n      eyeColor\n      skinColor\n      birthYear\n      starships {\n        edges {\n          node {\n            name\n          }\n        }\n      }\n      vehicles {\n        edges {\n          node {\n            name\n          }\n        }\n      }\n    } \n  }\n"]);return I=function(){return e},e}function q(){var e=Object(S.a)(["\n  query StarWarsStarships($cursor: String){\n    allStarships(first: 5, after: $cursor) {\n      edges{\n        node{\n            id\n            name\n            starshipClass\n        }\n      }\n      pageInfo {\n        endCursor\n        hasNextPage\n      }\n    } \n  }\n"]);return q=function(){return e},e}function P(){var e=Object(S.a)(["\n  query StarWarsPeople($cursor: String){\n    allPeople(first: 5, after: $cursor) {\n      edges{\n        node{\n            id\n            name\n            species {\n              edges {\n                node {\n                  name\n                }\n              }\n            }\n            homeworld {\n              name\n            }\n        }\n      }\n      pageInfo {\n        endCursor\n        hasNextPage\n      }\n    } \n  }\n"]);return P=function(){return e},e}var F=Object(o.gql)(P()),A=Object(o.gql)(q()),B=Object(o.gql)(I()),D=Object(o.gql)(k()),M={starships:{name:"Starships",query:A,field:"allStarships",path:"/detail/starship/",pathKey:"id",description:function(e){var t=e.starshipClass?e.starshipClass:"Unknown";return(t=t.charAt(0).toUpperCase()+t.slice(1))+" class"}},people:{name:"People",query:F,field:"allPeople",path:"/detail/person/",pathKey:"id",description:function(e){return(e.species.edges.length>0?e.species.edges[0].node.name:"Human")+" from "+(e.homeworld?e.homeworld.name:"Tatooine")}}},$=function(e){Object(m.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={object:void 0},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.props.match.params.object&&this.setState({object:this.props.match.params.object})}},{key:"render",value:function(){return this.state.object?Object(a.jsxs)(s.a.Fragment,{children:[Object(a.jsx)(w,{title:M[this.state.object].name+" of Star Wars",canBack:!0}),Object(a.jsx)(N,{object:M[this.state.object]})]}):Object(a.jsx)("div",{})}}]),n}(r.Component);function T(e){var t=e.title;return Object(a.jsx)("div",{className:"section-header",children:Object(a.jsx)("h2",{children:t})})}function L(e){var t=e.sectionTitle,n=e.data,r=e.fields;return Object(a.jsxs)("div",{children:[Object(a.jsx)(T,{title:t}),Array.isArray(n)?n.map((function(e,t){return Object(a.jsx)(v,{value:"",property:e.node[r]},t)})):r.map((function(e,t){return Object(a.jsx)(v,{property:e.displayName,value:n[e.property]},t)}))]})}function W(e){var t=e.id,n=e.object,r=(e.screen,Object(o.useQuery)(n.query,{variables:{id:t}})),i=r.loading,c=r.error,l=r.data;return i?Object(a.jsxs)(s.a.Fragment,{children:[Object(a.jsx)(w,{title:"",canBack:!0}),Object(a.jsx)(x,{})]}):c?Object(a.jsx)(s.a.Fragment,{children:Object(a.jsx)(g,{text:"Failed to Load Data"})}):Object(a.jsxs)("div",{children:[Object(a.jsx)(w,{title:l[n.name].name,canBack:!0}),Object(a.jsx)(L,{sectionTitle:"General Information",data:l[n.name],fields:n.generalInformation}),n.relations.map((function(e,t){return Object(a.jsx)(L,{sectionTitle:e.displayName,data:l[n.name][e.connection].edges,fields:e.information},t)}))]})}var K={person:{name:"person",query:B,relations:[{connection:"vehicles",name:"vehicles",information:"name",displayName:"Vehicles"},{connection:"starships",name:"starships",information:"name",displayName:"Starships"}],generalInformation:[{property:"eyeColor",displayName:"Eye Color"},{property:"hairColor",displayName:"Hair Color"},{property:"skinColor",displayName:"Skin Color"},{property:"birthYear",displayName:"Birth Year"}]},starship:{name:"starship",query:D,relations:[{connection:"pilots",name:"pilots",information:"name",displayName:"Pilots"},{connection:"films",name:"films",information:"title",displayName:"Films"}],generalInformation:[{property:"model",displayName:"Model"},{property:"costInCredits",displayName:"Cost in Credits"},{property:"length",displayName:"Length"},{property:"crew",displayName:"Crew"},{property:"cargoCapacity",displayName:"Capacity"}]}},E=function(e){Object(m.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={name:void 0,id:void 0,object:void 0},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.props.match.params.object&&this.props.match.params.id&&this.setState({object:this.props.match.params.object,id:this.props.match.params.id})}},{key:"render",value:function(){return this.state.object&&this.state.id?Object(a.jsx)(s.a.Fragment,{children:Object(a.jsx)(W,{id:this.state.id,object:K[this.state.object],screen:this})}):Object(a.jsx)("div",{})}}]),n}(r.Component),H=[{name:"People from Stat Wars",path:"/list/people/"},{name:"Starships from Stat Wars",path:"/list/starships/"}],Q=function(e){Object(m.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(a.jsxs)(s.a.Fragment,{children:[Object(a.jsx)(w,{title:"Star Wars",canBack:!1}),H.map((function(e,t){return Object(a.jsx)(y,{data:e,object:{}},t)}))]})}}]),n}(r.Component),R=new o.InMemoryCache({typePolicies:{Query:{fields:{allPeople:Object(l.H)(),allStarships:Object(l.H)()}}}}),U=new o.ApolloClient({uri:"http://localhost:8000/graphql",cache:R});var Y=function(){return Object(a.jsx)(o.ApolloProvider,{client:U,children:Object(a.jsx)(d.a,{children:Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)(j.c,{children:[Object(a.jsx)(j.a,{exact:!0,path:"/graphql-mode",component:Q}),Object(a.jsx)(j.a,{exact:!0,path:"/graphql-mode/list/:object",component:$}),Object(a.jsx)(j.a,{exact:!0,path:"/graphql-mode/detail/:object/:id",component:E})]})})})})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,90)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),s(e),i(e)}))};c.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(Y,{})}),document.getElementById("root")),J()}},[[88,1,2]]]);
//# sourceMappingURL=main.d75b6ab1.chunk.js.map