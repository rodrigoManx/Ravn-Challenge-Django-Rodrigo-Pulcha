(this["webpackJsonpravn-challenge-v2-rodrigo-pulcha"]=this["webpackJsonpravn-challenge-v2-rodrigo-pulcha"]||[]).push([[0],{27:function(e,t,a){},28:function(e,t,a){},34:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(1),s=a.n(c),r=a(20),i=a.n(r),o=(a(27),a(28),a(14)),l=a(2),j=a(9),p=a(10),d=a(12),h=a(11),b=a(7),u=a.p+"static/media/ArrowRight.1b02fef7.svg",m=a.p+"static/media/ActivityIndicator.014e4797.svg";function O(e){var t=e.property,a=e.value;return Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsxs)("div",{className:"cell data-cell",children:[Object(n.jsx)("div",{style:{textAlign:"left",width:""!==a?"50%":"100%"},children:Object(n.jsx)("h2",{className:"low-emphasis",children:t})}),""!==a?Object(n.jsx)("div",{style:{textAlign:"right",width:"50%"},children:Object(n.jsx)("h2",{children:a})}):Object(n.jsx)("div",{})]}),Object(n.jsx)("hr",{})]})}function f(){return Object(n.jsxs)("div",{className:"cell loading-cell",children:[Object(n.jsx)("img",{className:"activity-indicator",src:m}),Object(n.jsx)("h2",{className:"low-emphasis",children:"Loading"})]})}function x(e){var t=e.text;return Object(n.jsx)("div",{className:"cell",children:Object(n.jsx)("h2",{className:"high-emphasis",children:t})})}function v(e){var t=e.data,a=e.object,c=a.pathKey&&t[a.pathKey]?a.path+t[a.pathKey]:t.path,r=a.description?a.description(t):t.description;return t.name&&c?Object(n.jsx)(o.b,{to:encodeURI(c),children:Object(n.jsxs)("div",{className:"cell item-cell",children:[Object(n.jsx)("div",{children:Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)("h2",{children:t.name}),Object(n.jsxs)("p",{className:"low-emphasis",children:[" ",r," "]})]})}),Object(n.jsx)("img",{className:"cell-arrow-right",src:u})]})}):Object(n.jsx)("div",{})}function y(e){switch(!0){case 401===e:return"";case 405===e:return"No se permite el uso del m\xe9todo, ya estamos trabajando para resolverlo";case e>=400&&e<500:return"Algo sali\xf3 mal, pruede probar recargando la p\xe1gina";case e>=500:return"A ocurido un error, ya estamos trabajando para resolverlo. Intenta m\xe1s tarde";default:return"Algo sali\xf3 mal, ya estamos trabajando para resolverlo, intenta m\xe1s tarde"}}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=y(e);a&&console.log("Error ".concat(e," ").concat(t,":\n        ").concat(a))}function N(e){console.log("Connection error:",e)}function k(e){var t=e.object,a=Object(c.useState)(1),s=Object(b.a)(a,2),r=s[0],i=s[1],o=Object(c.useState)(!1),l=Object(b.a)(o,2),j=l[0],p=l[1],d=Object(c.useState)(!1),h=Object(b.a)(d,2),u=(h[0],h[1],Object(c.useState)(!1)),m=Object(b.a)(u,2),O=m[0],y=m[1],k=Object(c.useState)(null),S=Object(b.a)(k,2),w=S[0],C=S[1],F=Object(c.useState)([]),A=Object(b.a)(F,2),I=A[0],B=A[1],_=Object(c.useRef)(null),E=function(e){(function(e){return fetch("http://localhost:8000/app/"+e+"/?page="+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),{}).then((function(e){return e.ok?e.json():(g(e.status),{})}),N).catch((function(e){alert(e)}))})(t.table,e).then((function(e){C(e),e.results&&B(I.concat(e.results))})).catch((function(e){y(!0)}))};Object(c.useEffect)((function(){E()}),[]),Object(c.useEffect)((function(){if(!j){var e=new IntersectionObserver(D,{root:null,rootMargin:"0px",threshold:.2});_.current&&e.observe(_.current)}}));var D=function(e){e[0].isIntersecting&&(p((function(e){return!0})),w.next&&i(r+1))};return Object(c.useEffect)((function(){w&&w.next&&E(r)}),[r]),O?Object(n.jsx)(x,{text:"Failed to Load Data"}):w&&0!==w.results.length?Object(n.jsxs)("div",{children:[I.map((function(e,a){return Object(n.jsx)(v,{data:e,object:t},a)})),w.next?Object(n.jsx)("div",{className:"loading",ref:_,children:Object(n.jsx)(f,{})}):Object(n.jsx)("div",{className:"loading",ref:_})]}):Object(n.jsx)("div",{})}var S=a.p+"static/media/BackArrow.9f2db49f.svg";function w(e){var t=e.title,a=e.canBack;return Object(n.jsxs)("div",{className:"header",children:[a?Object(n.jsx)("img",{className:"back-arrow",src:S,onClick:function(){window.history.back()}}):Object(n.jsx)("div",{}),Object(n.jsx)("h2",{children:t})]})}var C={starships:{name:"Starships",table:"starship",field:"allStarships",path:"/detail/starship/",pathKey:"id",description:function(e){var t=e.starship_class?e.starship_class:"Unknown";return(t=t.charAt(0).toUpperCase()+t.slice(1))+" class"}},people:{name:"People",table:"people",field:"allPeople",path:"/detail/person/",pathKey:"id",description:function(e){return(e.species?e.species:"Human")+" from "+(e.homeworld?e.homeworld:"Tatooine")}}},F=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).state={object:void 0},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.props.match.params.object&&this.setState({object:this.props.match.params.object})}},{key:"render",value:function(){return this.state.object?Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)(w,{title:C[this.state.object].name+" of Star Wars",canBack:!0}),Object(n.jsx)(k,{object:C[this.state.object]})]}):Object(n.jsx)("div",{})}}]),a}(c.Component);function A(e){var t=e.title;return Object(n.jsx)("div",{className:"section-header",children:Object(n.jsx)("h2",{children:t})})}function I(e){var t=e.sectionTitle,a=e.data,c=e.fields;return Object(n.jsxs)("div",{children:[Object(n.jsx)(A,{title:t}),Array.isArray(a)?a.map((function(e,t){return Object(n.jsx)(O,{value:"",property:e[c]},t)})):c.map((function(e,t){return Object(n.jsx)(O,{property:e.displayName,value:a[e.property]},t)}))]})}function B(e){var t=e.id,a=e.object,r=(e.screen,Object(c.useState)(!1)),i=Object(b.a)(r,2),o=i[0],l=i[1],j=Object(c.useState)(null),p=Object(b.a)(j,2),d=p[0],h=p[1],u=Object(c.useState)(!1),m=Object(b.a)(u,2),O=m[0],v=(m[1],function(){(function(e,t){return fetch("http://localhost:8000/app/"+e+"/detail/"+t+"/",{}).then((function(e){return e.ok?e.json():(g(e.status),{})}),N).catch((function(e){alert(e)}))})(a.table,t).then((function(e){h(e)})).catch((function(e){l(!0)}))});return Object(c.useEffect)((function(){v()}),[]),O?Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)(w,{title:"",canBack:!0}),Object(n.jsx)(f,{})]}):o?Object(n.jsx)(s.a.Fragment,{children:Object(n.jsx)(x,{text:"Failed to Load Data"})}):d?Object(n.jsxs)("div",{children:[Object(n.jsx)(w,{title:d.name,canBack:!0}),Object(n.jsx)(I,{sectionTitle:"General Information",data:d,fields:a.generalInformation}),a.relations.map((function(e,t){return Object(n.jsx)(I,{sectionTitle:e.displayName,data:d[e.connection],fields:e.information},t)}))]}):Object(n.jsx)("div",{})}var _={person:{name:"person",table:"people",relations:[{connection:"vehicles",name:"vehicles",information:"name",displayName:"Vehicles"},{connection:"starships",name:"starships",information:"name",displayName:"Starships"}],generalInformation:[{property:"eye_color",displayName:"Eye Color"},{property:"hair_color",displayName:"Hair Color"},{property:"skin_color",displayName:"Skin Color"},{property:"birth_year",displayName:"Birth Year"}]},starship:{name:"starship",table:"starship",relations:[{connection:"pilots",name:"pilots",information:"name",displayName:"Pilots"},{connection:"films",name:"films",information:"title",displayName:"Films"}],generalInformation:[{property:"model",displayName:"Model"},{property:"cost_in_credits",displayName:"Cost in Credits"},{property:"length",displayName:"Length"},{property:"crew",displayName:"Crew"},{property:"cargo_capacity",displayName:"Capacity"}]}},E=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).state={name:void 0,id:void 0,object:void 0},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.props.match.params.object&&this.props.match.params.id&&this.setState({object:this.props.match.params.object,id:this.props.match.params.id})}},{key:"render",value:function(){return this.state.object&&this.state.id?Object(n.jsx)(s.a.Fragment,{children:Object(n.jsx)(B,{id:this.state.id,object:_[this.state.object],screen:this})}):Object(n.jsx)("div",{})}}]),a}(c.Component),D=[{name:"People from Stat Wars",path:"/list/people/"},{name:"Starships from Stat Wars",path:"/list/starships/"}],L=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).state={},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(n.jsxs)(s.a.Fragment,{children:[Object(n.jsx)(w,{title:"Star Wars",canBack:!1}),D.map((function(e,t){return Object(n.jsx)(v,{data:e,object:{}},t)}))]})}}]),a}(c.Component);var M=function(){return Object(n.jsx)(o.a,{children:Object(n.jsx)("div",{className:"App",children:Object(n.jsxs)(l.c,{children:[Object(n.jsx)(l.a,{exact:!0,path:"/",component:L}),Object(n.jsx)(l.a,{exact:!0,path:"/list/:object",component:F}),Object(n.jsx)(l.a,{exact:!0,path:"/detail/:object/:id",component:E})]})})})},P=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,35)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)}))};i.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(M,{})}),document.getElementById("root")),P()}},[[34,1,2]]]);
//# sourceMappingURL=main.4e1d2c34.chunk.js.map