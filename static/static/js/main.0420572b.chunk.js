(this["webpackJsonpravn-challenge-v2-rodrigo-pulcha"]=this["webpackJsonpravn-challenge-v2-rodrigo-pulcha"]||[]).push([[0],{27:function(e,t,a){},28:function(e,t,a){},34:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a(1),s=a.n(n),r=a(20),i=a.n(r),o=(a(27),a(28),a(14)),l=a(2),j=a(9),d=a(10),p=a(12),h=a(11),b=a(7),u=a.p+"static/media/ArrowRight.1b02fef7.svg",m=a.p+"static/media/ActivityIndicator.014e4797.svg";function O(e){var t=e.property,a=e.value;return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsxs)("div",{className:"cell data-cell",children:[Object(c.jsx)("div",{style:{textAlign:"left",width:""!==a?"50%":"100%"},children:Object(c.jsx)("h2",{className:"low-emphasis",children:t})}),""!==a?Object(c.jsx)("div",{style:{textAlign:"right",width:"50%"},children:Object(c.jsx)("h2",{children:a})}):Object(c.jsx)("div",{})]}),Object(c.jsx)("hr",{})]})}function f(){return Object(c.jsxs)("div",{className:"cell loading-cell",children:[Object(c.jsx)("img",{className:"activity-indicator",src:m}),Object(c.jsx)("h2",{className:"low-emphasis",children:"Loading"})]})}function v(e){var t=e.text;return Object(c.jsx)("div",{className:"cell",children:Object(c.jsx)("h2",{className:"high-emphasis",children:t})})}function x(e){var t=e.data,a=e.object,n=a.pathKey&&t[a.pathKey]?a.path+t[a.pathKey]:t.path,r=a.description?a.description(t):t.description;return t.name&&n?Object(c.jsx)(o.b,{to:encodeURI(n),children:Object(c.jsxs)("div",{className:"cell item-cell",children:[Object(c.jsx)("div",{children:Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)("h2",{children:t.name}),Object(c.jsxs)("p",{className:"low-emphasis",children:[" ",r," "]})]})}),Object(c.jsx)("img",{className:"cell-arrow-right",src:u})]})}):Object(c.jsx)("div",{})}function y(e){switch(!0){case 401===e:return"";case 405===e:return"No se permite el uso del m\xe9todo, ya estamos trabajando para resolverlo";case e>=400&&e<500:return"Algo sali\xf3 mal, pruede probar recargando la p\xe1gina";case e>=500:return"A ocurido un error, ya estamos trabajando para resolverlo. Intenta m\xe1s tarde";default:return"Algo sali\xf3 mal, ya estamos trabajando para resolverlo, intenta m\xe1s tarde"}}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=y(e);a&&console.log("Error ".concat(e," ").concat(t,":\n        ").concat(a))}function N(e){console.log("Connection error:",e)}function k(e){var t=e.object,a=Object(n.useState)(1),s=Object(b.a)(a,2),r=s[0],i=s[1],o=Object(n.useState)(!1),l=Object(b.a)(o,2),j=l[0],d=l[1],p=Object(n.useState)(!1),h=Object(b.a)(p,2),u=h[0],m=h[1],O=Object(n.useState)(!1),y=Object(b.a)(O,2),k=y[0],S=y[1],w=Object(n.useState)([]),C=Object(b.a)(w,2),F=C[0],A=C[1],I=Object(n.useState)(!1),B=Object(b.a)(I,2),_=B[0],E=B[1],D=Object(n.useRef)(null),L=function(e){(function(e){return fetch("http://localhost:8000/app/"+e+"/?page="+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),{}).then((function(e){return e.ok?e.json():(g(e.status),{})}),N).catch((function(e){alert(e)}))})(t.table,e).then((function(e){e?e.results?(A(F.concat(e.results)),d(!1),E(!1)):S(!0):m(!0)}))};Object(n.useEffect)((function(){_&&L(r)}),[_]),Object(n.useEffect)((function(){j&&E(!1)}),[j]),Object(n.useEffect)((function(){var e=new IntersectionObserver(M,{root:null,rootMargin:"0px",threshold:.2});D.current&&e.observe(D.current)}),[j,_,F]);var M=function(e){e[0].isIntersecting&&!j&&(E(!0),i(r+1))};return u?Object(c.jsx)(v,{text:"Failed to Load Data"}):F?Object(c.jsxs)("div",{children:[F.map((function(e,a){return Object(c.jsx)(x,{data:e,object:t},a)})),k?Object(c.jsx)("div",{className:"loading",ref:D}):Object(c.jsx)("div",{className:"loading",ref:D,children:Object(c.jsx)(f,{})})]}):Object(c.jsx)("div",{className:"loading",ref:D,children:Object(c.jsx)(f,{})})}var S=a.p+"static/media/BackArrow.9f2db49f.svg";function w(e){var t=e.title,a=e.canBack;return Object(c.jsxs)("div",{className:"header",children:[a?Object(c.jsx)("img",{className:"back-arrow",src:S,onClick:function(){window.history.back()}}):Object(c.jsx)("div",{}),Object(c.jsx)("h2",{children:t})]})}var C={starships:{name:"Starships",table:"starship",field:"allStarships",path:"/detail/starship/",pathKey:"id",description:function(e){var t=e.starship_class?e.starship_class:"Unknown";return(t=t.charAt(0).toUpperCase()+t.slice(1))+" class"}},people:{name:"People",table:"people",field:"allPeople",path:"/detail/person/",pathKey:"id",description:function(e){return(e.species?e.species:"Human")+" from "+(e.homeworld?e.homeworld:"Tatooine")}}},F=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var c;return Object(j.a)(this,a),(c=t.call(this,e)).state={object:void 0},c}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.match.params.object&&this.setState({object:this.props.match.params.object})}},{key:"render",value:function(){return this.state.object?Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)(w,{title:C[this.state.object].name+" of Star Wars",canBack:!0}),Object(c.jsx)(k,{object:C[this.state.object]})]}):Object(c.jsx)("div",{})}}]),a}(n.Component);function A(e){var t=e.title;return Object(c.jsx)("div",{className:"section-header",children:Object(c.jsx)("h2",{children:t})})}function I(e){var t=e.sectionTitle,a=e.data,n=e.fields;return Object(c.jsxs)("div",{children:[Object(c.jsx)(A,{title:t}),Array.isArray(a)?a.map((function(e,t){return Object(c.jsx)(O,{value:"",property:e[n]},t)})):n.map((function(e,t){return Object(c.jsx)(O,{property:e.displayName,value:a[e.property]},t)}))]})}function B(e){var t=e.id,a=e.object,r=(e.screen,Object(n.useState)(!1)),i=Object(b.a)(r,2),o=i[0],l=i[1],j=Object(n.useState)(null),d=Object(b.a)(j,2),p=d[0],h=d[1],u=Object(n.useState)(!1),m=Object(b.a)(u,2),O=m[0],x=(m[1],function(){(function(e,t){return fetch("http://localhost:8000/app/"+e+"/detail/"+t+"/",{}).then((function(e){return e.ok?e.json():(g(e.status),{})}),N).catch((function(e){alert(e)}))})(a.table,t).then((function(e){h(e)})).catch((function(e){l(!0)}))});return Object(n.useEffect)((function(){x()}),[]),O?Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)(w,{title:"",canBack:!0}),Object(c.jsx)(f,{})]}):o?Object(c.jsx)(s.a.Fragment,{children:Object(c.jsx)(v,{text:"Failed to Load Data"})}):p?Object(c.jsxs)("div",{children:[Object(c.jsx)(w,{title:p.name,canBack:!0}),Object(c.jsx)(I,{sectionTitle:"General Information",data:p,fields:a.generalInformation}),a.relations.map((function(e,t){return Object(c.jsx)(I,{sectionTitle:e.displayName,data:p[e.connection],fields:e.information},t)}))]}):Object(c.jsx)("div",{})}var _={person:{name:"person",table:"people",relations:[{connection:"vehicles",name:"vehicles",information:"name",displayName:"Vehicles"},{connection:"starships",name:"starships",information:"name",displayName:"Starships"}],generalInformation:[{property:"eye_color",displayName:"Eye Color"},{property:"hair_color",displayName:"Hair Color"},{property:"skin_color",displayName:"Skin Color"},{property:"birth_year",displayName:"Birth Year"}]},starship:{name:"starship",table:"starship",relations:[{connection:"pilots",name:"pilots",information:"name",displayName:"Pilots"},{connection:"films",name:"films",information:"title",displayName:"Films"}],generalInformation:[{property:"model",displayName:"Model"},{property:"cost_in_credits",displayName:"Cost in Credits"},{property:"length",displayName:"Length"},{property:"crew",displayName:"Crew"},{property:"cargo_capacity",displayName:"Capacity"}]}},E=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var c;return Object(j.a)(this,a),(c=t.call(this,e)).state={name:void 0,id:void 0,object:void 0},c}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.match.params.object&&this.props.match.params.id&&this.setState({object:this.props.match.params.object,id:this.props.match.params.id})}},{key:"render",value:function(){return this.state.object&&this.state.id?Object(c.jsx)(s.a.Fragment,{children:Object(c.jsx)(B,{id:this.state.id,object:_[this.state.object],screen:this})}):Object(c.jsx)("div",{})}}]),a}(n.Component),D=[{name:"People from Stat Wars",path:"/list/people/"},{name:"Starships from Stat Wars",path:"/list/starships/"}],L=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var c;return Object(j.a)(this,a),(c=t.call(this,e)).state={},c}return Object(d.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)(w,{title:"Star Wars",canBack:!1}),D.map((function(e,t){return Object(c.jsx)(x,{data:e,object:{}},t)}))]})}}]),a}(n.Component);var M=function(){return Object(c.jsx)(o.a,{children:Object(c.jsx)("div",{className:"App",children:Object(c.jsxs)(l.c,{children:[Object(c.jsx)(l.a,{exact:!0,path:"/",component:L}),Object(c.jsx)(l.a,{exact:!0,path:"/list/:object",component:F}),Object(c.jsx)(l.a,{exact:!0,path:"/detail/:object/:id",component:E})]})})})},P=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,35)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),s(e),r(e)}))};i.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(M,{})}),document.getElementById("root")),P()}},[[34,1,2]]]);
//# sourceMappingURL=main.0420572b.chunk.js.map